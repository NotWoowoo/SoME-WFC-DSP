<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="dist/main.css" rel="stylesheet">
    <title>Audio Programming Tutorial</title>
</head>
<body>
    <div class="bg-slate-200 py-2 shadow-sm"> 
        <h1 class="text-center text-3xl">DSP For Audio Programming</h1>
        <h3 class="text-center text-xl">An Interactive Guide by Sean McGoff and notWoowoo</h3>
    </div>
    

    <p class="text-center my-2" >
        <button onclick="toggleEverything(this)" class="bg-slate-200 hover:bg-yellow-100 rounded-md px-2 py-1">SHOW Everything</button>
    </p>

    <!--ABOUT DROPDOWN-->
    <div class="dropdown root-dropdown">
        <h3 class="section-title">&#8594; <b>About</b></h3>
        <div class="section-body">
            <p>This website is designed to teach enough digital signal processing (DSP) in order for you to be able to start your journey into programming audio software. Whether you want to create VST plugins for digital audio workstations, add complex audio to your website / application / game, or just want to pick up a new skill, this free course will give you a great foundation in DSP.</p>
            <p>For those interested in what technology powers this site, we are using Github Pages to host the website, Tailwind CSS to style the pages, Desmos' API to create the interactive visualizations, and C++ (compiled into web assembly) for the editing environments. The public GitHub repository can be found 
            <a class="text-blue-600" href=”https://github.com/NotWoowoo/SoME-WFC-DSP”>here</a>.</p>
        </div>
        <div class="dropdown child-dropdown">
            <p class="section-title">&#8594; How to use this website</p>
            <div class="section-body">
                <p>This website is organized into a tree of dropdown menus, each expanding on subjects in higher level dropdowns (such as this "How to use this website" dropdown).</p>
                <p>To get the most out of this site, it's recommended to start by reading everything (with "Expand Everything" if you prefer). Once you have gone through the information once, specific information is easily accessable by navigating the dropdowns.</p>
            </div>
        </div>
    </div>

    <!--SECTION 1 DROPDOWN-->
    <div class="dropdown root-dropdown">
        <h3 class="section-title">&#8594; <b>Section 1:</b> What is digital audio, really?</h3>

        <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; The Wide World of DSP</h3>
            <div class="section-body">
                <p>It seems pretty reasonable that in order to understand how to process digital audio, you must first understand what digital audio is. As you'll soon find out, digital audio is merely a category of a larger kind of digital data called signals. Signals are that new beat you spent all night working on, the readings from an EKG sensor, seismic data from geophones, and even images of cats on the internet (although that application is a bit more complex). The point is that while this course is specifically geared towards digital audio in particular, that is far from the only application of this course's material. If you want more information on DSP's applications in image processing and data compression, I'd recommend looking through Chapters 23 to 27 of <a class="text-blue-600" href="http://www.dspguide.com/">Dr. Steven W. Smith's “The Scientist and Engineer's Guide to Digital Signal Processing”</a>
                </p> 
            </div>
        </div>

        <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; Signals, Samples, Amplitude, and Sample Rate</h3>
            <div class="section-body">
                <p>So, what is this signal? A signal is a list of numbers over a fixed rate of time. In the case of audio, the numbers are known as the “samples” and they measure the “amplitude” at each sample's point in time. Typically, amplitude is denoted as a decimal value between -1 and 1. The way I like to think about amplitude is by imagining the cone of a speaker. An amplitude of 1 means the cone is pushed all the way out, and -1 is pulled all the way in. From the rapid movement of the cone's position over time, you get sound. The fixed rate of time is known as the “sample rate”, which is commonly measured in samples per second. The most common sample rate in music is 44.1khz, or 44,100 samples per second.</p>
                <div class="flex justify-center">
                    <div id="sampleRateDesmosCalc" style="width: 600px; height: 400px;"></div>
                </div>
            </div>
        </div>

        <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; The sample rate determines the highest possible frequency that an 
            audio signal can have.</h3>
            <div class="section-body">
                <p>The "Nyquist frequency" is the highest possible frequency that can be represented by a signal, and it's exactly half of the sample rate.</p>
                <p>Since human hearing goes up to 20,000 hz or 20kHz, the sample rate of most audio you listen to is around 40kHz.</p>
            </div>
        </div>

        <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; Numbers in a computer that represent audio samples have FINITE precision! You can usually find audio being stored in a decimal format called <a class="text-blue-600" href="https://en.wikipedia.org/wiki/IEEE_754">IEEE</a> with a precision of 32 or 64 bits. The number of bits used to store audio is called the "bit depth."</h3>
            <div class="section-body">
                <p>Lower bit depths force samples' amplitudes to be quantized (forced into descrete values). The effect of this is a noiser audio signal that sounds characteristically "retro" (since old hardware had lower bit depths).</p>
                <p>[two files to compare of different bit depths maybe]</p>
                <div class="flex justify-center">
                    <div id="bitDepthDesmosCalc" style="width: 600px; height: 400px;"></div>
                </div>
            </div>
        </div>

        <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; Audio is usually stored in the "time domain" (samples are a variable of time). 
            However, audio can also be manipulated and described in the "frequency domain."</h3>
            <div class="dropdown child-dropdown">
            <h3 class="section-title">&#8594; A sine wave is one of the easiest audio signals to work with. In the time domain it's just the function sin(x), and in the frequency domain, it's just a spike at some given frequency.</h3>
            <div class="section-body flex justify-center">
                <iframe src="https://www.desmos.com/calculator/ooua5cstl9?embed" width="600" height="400" style="border: 1px solid #ccc" frameborder=0></iframe>
            </div>
            </div>
            <div class="section-body">
                <p>Any audio signal can be broken down into a sum of many different sine waves using the Fourier Transform<br />(see the linked 3b1b video for details).</p>
                <br />
                <div class="flex justify-center">
                    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/spUNpyF58BY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>

    <div class="dropdown root-dropdown">
        <h3 class="section-title">&#8594; <b>Section 2</b> uhhh</h3>
        <div class="section-body">
            <p>TBD</p>
        </div>
    </div>


    <div class="text-center">
        <h6 class="mt-2">interactive demo (WIP)</h6>
        <button onclick="onTestButtonClicked()" class="bg-slate-200 hover:bg-yellow-100 rounded-md px-2 py-1 mb-2">Run Demo</button>
        <div class="h-56 flex justify-center">
            <canvas class="mx-2" id="oscilloscope"></canvas>
            <canvas class="mx-2" id="fft"></canvas>
        </div>
    </div>
    

    <!-- PLAN (so far)...
        PROGRAMMING: sine waves & other waves
        user has task to make a sine wave, specifics tbd (but include some basics about pitch and multiplying the input)??
        user can try adding multiple sine waves.

        Another common type of wave: saw wave
        first user makes saw wave via mod func,
        then user does the same via adding sine waves according to the fact that each harmonic in a saw wave is sin(nx)/n.

        Same with square waves
        user can try subtracting a saw wave one octave higher from the original saw wave
        OR can add the harmonics manually

        TODO:
        noise and (its colors)
        filtering
        modulation of signals (pitch and vol LFOs and FM/AM/PM synthesis)
        Basic programmatic sequencing
    -->

    <script src="js/main.js"></script>
    <script>
    //NOTE: it could be convenient to cache the status of which dropdowns are visible
    function dropdown(e){
        Array.from(e.children).forEach((c,i) => {
            if(i===0) return
            if(c.dropdown_originalDisplay === undefined) c.dropdown_originalDisplay = c.style.display //janky?
            c.style.display = c.style.display === 'none' ? c.dropdown_originalDisplay : 'none'
            //TODO: Add switching arrow from → to ↓ on expand and vice versa
        })
    }

    var toggleEverythingDropped = false;
    function toggleEverything(eBtn){
        Array.from(document.getElementsByClassName("dropdown")).forEach(e => {
            Array.from(e.children).forEach((c,i) => {
                if(i===0) return
                 c.style.display = toggleEverythingDropped ? 'none' : c.dropdown_originalDisplay
            })
        })
        toggleEverythingDropped = !toggleEverythingDropped
        eBtn.innerHTML = toggleEverythingDropped ? 'HIDE Everything' : 'SHOW Everything'
    }

    Array.from(document.getElementsByClassName("dropdown")).forEach(e => {
        e.getElementsByClassName('section-title')[0].onclick = () => dropdown(e)
        dropdown(e)
    })
    </script>
    <script src="https://www.desmos.com/api/v1.7/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <script src="js/calculator.js"></script>
</body>
</html>
